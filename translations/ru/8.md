# Глава 8
# Руководство по кошелькам и советы по устранению ошибок
## Специальные инструкции для официального GUI-кошелька Monero

Следующие инструкции помогут выполнить задачи, описанные выше, посредством графического интерфейса пользователя (GUI) Monero. Если вы используете другой кошелёк, то можете пропустить этот раздел.

### 1. Выбор языка

Официальный GUI-кошелёк Monero можно загрузить по ссылке: [https://getmonero.org/downloads](https://getmonero.org/downloads). Как только приложение будет загружено и запущено, появится экран выбора языка.

Если вы не нашли свой язык, вы можете [сделать свой перевод и помочь тем самым другим](https://github.com/monero-project/monero-gui/tree/master/translations)! Как только язык будет выбран, GUI спросит, не хотите ли вы создать новый кошелек или же вам необходимо восстановить уже существующий.

### 2. Опции

GUI-кошелёк Monero предлагает выбрать один из трёх типов кошелька: Mainnet (основная сеть), Testnet (тестовая сеть) и Stagenet (тестовая сеть имитирующая основную).

Чтобы получить доступ к действующему блокчейну с реальными Monero, следует выбрать опцию Mainnet (установлена по умолчанию). Testnet и Stagenet являются двумя отдельными блокчейнами и используются разработчиками для написания и тестирования нового кода. В Testnet и Stagenet нет реальных монет Monero, и они не могут быть переданы в основную сеть.

Если это ваш первый кошелёк Monero, то вам следует выбрать опцию [create new wallet]. Программное обеспечение Monero сгенерирует для вас новую мнемоническую фразу, состоящую из 25 слов.


![Новый или Восстановить](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/new_or_restore_gui.png)

### 3. Запись мнемонической фразы

Необходимо помнить о том, что мнемоническая фраза не является паролем! Сеть не сможет восстановить доступ к вашим средствам, если вы утратите свою мнемоническую фразу.

Следует убедиться в том, что фраза записана и сохранена в безопасном месте, где более никто не сможет найти её!


### 4. Ввод пароля
Если у кого-то кроме вас есть доступ к вашему компьютеру, вы можете создать пароль для вашего кошелька, обезопасив его таким образом. Пароль кошелька является локальной мерой безопасности подобно PIN-коду разблокировки экрана. Он никак не влияет на криптографию или на то, как ваши Monero хранятся в блокчейне, поэтому для восстановления вашего кошелька на основе мнемонической фразы такой локальный пароль не понадобится.

### 5. Загрузка блокчейна Monero

Затем необходимо выбрать опцию создания собственного узла или опцию подсоединения к удалённому узлу.

Запуск собственного узла требует по крайней мере 60 Гб свободного места на жёстком диске, чтобы сохранить блокчейн. Если ваши устройства имеют ограниченный ресурс, вы можете выбрать опцию подсоединения к удалённому узлу [connect to a remote node], чтобы конфигурировать лёгкий кошелёк, который получит доступ к данным, сохранённым где-то в другом месте. О плюсах и минусах использования удалённых узлов написано в разделе 4.2.3, где сравниваются «локальные» и «удалённые» узлы.

## После этого... добро пожаловать в GUI-кошелёк Monero!


### 8.1.2 Получение Monero в GUI-кошельке

Вкладка [Receive] GUI-кошелька Monero содержит как текстовый формат вашего адреса получения, так и адрес в формате QR-кода. Кнопка [Create new address] позволяет сгенерировать больше подадресов, которые будут принадлежать одному кошельку (мнемонической фразе). Если кто-то должен выслать вам определённую сумму, вы можете ввести сумму в поле [Amount], которая затем будет преобразована в QR-код.

![Получение Monero](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/receive_monero_gui.png)

### 8.1.3 Отправка Monero из GUI-кошелька

Чтобы отправить Monero, необходимо просто указать сумму, которую вы хотите отправить, а также адрес получателя. Поле идентификатора платежа [Payment ID] можно оставить незаполненным, если только ваш получатель предварительно не укажет ID платежа. Поле описания [Description] сохраняется локально, поэтому вы спокойно можете оставлять примечания для себя. Они не восстановятся, если вы будете восстанавливать кошелёк на основе вашей мнемонической фразы.

![Отправка Monero](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/send_gui.png)

### История транзакций

![История транзакций](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/transaction_history_gui.png)

### 8.1.4 Доказательство платежа в GUI-кошельке

Верификация доказательства платежа в случае с GUI производится через функцию [prove/check]. На скриншоте выше показаны идентификатор транзакции, адрес и ключ транзакции из примера с Марией и Ханом из Главы 5.

![Доказательство платежа](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/checking_gui.png)

## 8.2 Специальные инструкции для официального CLI-кошелька Monero

Следующие инструкции помогут выполнить задачи, описанные ранее, посредством кошелька с поддержкой командной строки (CLI). Если вы используете другой кошелёк, то можете пропустить этот раздел.

### 8.2.1 Настройка кошелька с поддержкой командной строки

Официальный CLI-кошелёк Monero можно загрузить по ссылке: https://getmonero.org/downloads. Команда вызова CLI зависит от вашей операционной системы. В случае с Linux достаточно просто запустить ./monero-wallet-cli прямо из папки кошелька. Если вы хотите подсоединиться к удалённому узлу, привязать свой IP-адрес или добавить другие продвинутые опции, необходимо добавить дополнительные флаги (задокументированы в этой главе).

    $ wget https://downloads.getmonero.org/cli/linux64

    2014-08-12 (490 MB/s) - 'linux64' saved [45719102/45719102]

    $ tar jxvf linux64

    ./monero/
    ./monero/monero-wallet-rpc
    ./monero/monero-blockchain-import
    ./monero/monero-blockchain-ancestry
    ./monero/monero-blockchain-usage
    ./monero/monero-wallet-cli
    ./monero/monero-blockchain-depth
    ./monero/monero-gen-trusted-multisig
    ./monero/monerod
    ./monero/monero-blockchain-export
    ./monero/monero-blockchain-blackball

    $ cd monero && ./monero-wallet-cli

    2018-10-24 18:58:11,024 INFO  [default] Page size: 4096
    This is the command line monero wallet. It needs to connect to a monero daemon to work correctly.

    WARNING: Do not reuse your Monero keys on another fork, UNLESS this fork has key reuse mitigations built in. Doing so will harm your privacy.

    Monero CODENAME (vX.X.X-release)

    Specify wallet file name (e.g., MyWallet). If the wallet doesn't exist, it will be created.
    Wallet file name (or Ctrl-C to quit): (enter the name of your wallet you want to create) testwallet
    No wallet found with that name. Confirm creation of new wallet named: testwallet
    (Y/Yes/N/No): Yes
    Generating new wallet...
    Enter a new password for the wallet: (enter your secret password)
    Confirm password: (confirm your password)
    List of available languages for your wallet's seed:
    0 : Deutsch
    1 : English
    2 : Español
    3 : Français
    4 : Italiano
    5 : Nederlands
    6 : Português
    7 : русский язык
    8 : Japanese
    9 : Chinese
    10 : Esperanto
    11 : Lojban
    Enter the number corresponding to the language of your choice: (from 1 to 10)

    Generated new wallet: 4BKjy1uVRTPiz4pHyaXXawb82XpzLiowSDd8rEQJGqvN6AD6kWosLQ6VJXW9sghopxXgQSh1RTd54JdvvCRsXiF41xvfeW5

    View key: 9227a05c665f684f5b8fef815cedd8a911b426c9fa07554c70daacf87757b302
    **************************************************************
    Your wallet has been generated!
    To start synchronizing with the daemon, use the "refresh" command.
    Use the "help" command to see the list of available commands.
    [...]

    lamb hexagon aces acquire twang bluntly argue when unafraid awning academy nail threaten sailor palace selfish cadets click sickness juggled border thumbs remedy ridges border
    **************************************************************
    Starting refresh...
    Background refresh thread started
    [wallet 433bhJ]:

### 8.2.2 Получение Monero
Свой адрес вы можете найти путём ввода address. Если вы хотите объединить адрес с идентификатором платежа, вы можете ввести integrated_address, чтобы сгенерировать произвольный идентификатор платежа, или же вы можете указать определённый идентификатор платежа в качестве вводного аргумента, например, так:

    [wallet 433bhJ]: integrated_address 12346780abcdef00

### 8.2.3 Отправка Monero

Для отправки Monero используется команда transfer. Чтобы отправить Monero на один адрес, необходимо указать количество миксинов (после хардфорка, состоявшегося в октябре 2018 года, фиксированное количество миксинов, равное 11, является обязательным), ввести адрес получателя и сумму, которая будет отправлена. При отправке 0.06 XMR посредством CLI, описанной выше, команда будет следующей:

    [wallet 433bhJ]:  transfer 4758W1dAkifB2G1wQKmPWRvPs9zdsb5ctRFW2ttQbkQxYHRuPRdHZ9ijqJ7oxcns9SvtpiH8ti8BRjL3LUHaBURpiz4KF​ 0.06

### 8.2.4 Доказательство платежа

CLI не записывает ключи транзакции по умолчанию. Однако вы можете подключить эту функцию, присвоив store-tx-info значение 1. Вы можете найти ключ транзакции, указав ID транзакции в качестве первого аргумента get_tx_key, например:

    [wallet 433bhJ]: get_tx_key 4b540773ddf9e819f0df47708f3d3c9f7f62933150b90edc8910 3d36d42ca4b7

При верификации ключа транзакции синтаксис будет следующим: check_tx_key TXID TXKEY ADDRESS, поэтому команда для проверки ключа транзакции Марии (из примера, приведённого во второй главе) будет следующей:

    [wallet 433bhJ]: check_tx_key 4b540773ddf9e819f0df47708f3d3c9f7f62933150b90edc891 03d36d42ca4b7

Если вы ищете платёж c известным идентификатором платежа, вам необходимо просто указать это в команде платежа, например:

     [wallet 433bhJ]: payments 12346780abcdef00 OutProofV1To53Qu2gegZbUevosKCTwrEdqiECgFyUygutXMEdh

## 8.3 Устранение типичных ошибок

### 8.3.1 Проблема: я перевёл Monero на свой кошелёк, но мой баланс по-прежнему составляет 0 XMR

Доступные решения:

1) [Всегда] Следует проверить, правильно ли вы скопировали адрес Monero (иногда вредоносное программное обеспечение может попытаться изменить скопированный адрес Monero).

2) Проверить, пришла ли реально транзакция на ваш кошелёк/адрес. Это делается следующим образом:
A. Перейти на страницу настроек [Settings] GUI-кошелька и нажать [Show seed & keys]. Затем скопируйте приватный ключ просмотра.
B. Перейти в блокчейн-эксплорер, например, в xmrchain.net.
C. Ввести ваш ID транзакции/хеш.
D. Ввести ваш публичный ключ просмотра и адрес под кнопкой [Decode outputs].
E. Нажать [Decode outputs].
F. Если в результате будет указано [output true], то это будет свидетельствовать о том, что транзакция была отправлена и записана в блокчейне.

3) В том случае, если на втором этапе (выше) будет подтверждено, что транзакция произошла, то ваши Monero находятся на своём месте, но кошелёк пока не нашёл выходы. GUI-кошелёк Monero использует локальный кеш, обновление которого занимает несколько секунд, особенно в случае с Windows. Если проблема не исчезнет, попробуйте нажать [Rescanning for outputs] в настройках GUI-кошелька Monero или же попытайтесь связаться с поддержкой через каналы Monero (см. Главу 6).

### 8.3.2 Проблема: мне кажется, что в моём CLI-кошельке ошибки/он постоянно зависает

Прежде всего, важно убедиться в том, что у вас установлена последняя версия кошелька. Номер версии можно посмотреть на странице настроек [Settings] вашего GUI-кошелька (под информацией [Debug]). Если у вас установлена не самая последняя версия, следует сначала обновить кошелёк.

В процессе начальной синхронизации GUI обычно работает медленнее. В это время демон-программа monerod использует значительную часть ресурса CPU для верификации блоков и транзакций.

Вы можете уменьшить степень использования CPU демоном monerod следующим образом:

1. Перейдите на страницу [Settings] вашего GUI-кошелька.
2. Добавьте --max-concurrency 1 в поле [daemon startup flags].
3. Остановите работу демон-программы и выйдите из GUI.
4. Перезапустите GUI-кошелёк и демон-программу.

Перезапуск необходим для того, чтобы демон-программа начала работу с новым флагом —max-concurrency, который конфигурирует monerod таким образом, что им используется только 1 поток CPU.

## 8.4 Как создать кошелёк, предназначенный только для просмотра

Как уже говорилось в параграфе 5.3.2.2, кошелёк, предназначенный только для просмотра (view-only), представляет собой специальный кошелёк, в котором содержится приватный ключ просмотра, позволяющий просмотреть все транзакции, посредством которых были отправлены или получены средства. Такая возможность будет полезна и поможет тем, кто хотел бы добавить прозрачности, позволив другим людям частично просматривать их транзакции.

Настоящее руководство подразумевает, что вы уже создали бумажный/холодный кошелёк и теперь уже готовы создать в GUI кошелёк, предназначенный для просмотра. Для этого необходимо сделать следующее:

1. Запустить программу Monero GUI.
2. На экране лендинга выбрать «Восстановить кошелёк, используя ключи или мнемоническую фразу» ("Restore wallet from keys or mnemonic seed").
3. Ввести предпочтительное «Имя кошелька» ("Wallet Name") и указать «Местоположение кошелька» ("Wallet Location").
4. Выбрать кнопку «Восстановить, используя ключи» ("Restore from Keys").
5. Ввести публичный адрес созданного вами бумажного/холодного кошелька.
6. Ввести приватный ключ просмотра созданного вами бумажного/холодного кошелька.
7. Оставить поле ввода приватного ключа траты незаполненным!
8. Ввести предпочтительную высоту восстановления или дату создания. Нажать кнопку «далее».
9. На появившемся экране ввести сложный пароль. Нажать кнопку «далее».
10. На появившемся экране выбрать соединение посредством локального (рекомендуется) или удалённого узла. При выборе локального узла следует указать папку, в которой хранится ваша копия блокчейна.
11. На последнем экране подтвердить правильность реквизитов кошелька и открыть кошелёк, предназначенный для просмотра!

Теперь вы можете просматривать и подтверждать транзакции, которые были отправлены/приняты вами на бумажный/холодный кошелёк! Если вы хотите просто попробовать, чтобы поближе ознакомиться с процессом, вы можете проделать указанные выше шаги, воспользовавшись информацией кошелька Общего фонда Monero:

Публичный адрес кошелька: 44AFFq5kSiGBoZ4NMDwYtN18obc8AemS33DBLWs3H7otXft3XjrpDtQGv7SqSsaBYBb98uNbr2VBBEt7f2wfn3RVGQBEP3A

Приватный ключ просмотра: f359631075708155cc3d92a32b75a7d02a5dcf27756707b47a2b31b21c389501
